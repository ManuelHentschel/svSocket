<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Evaluate R code in a server process — evalServer • svSocket</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>



<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- svPkgdown -->
<script src="../script.js"></script>

<!-- themify icon -->
<link rel="stylesheet" href="../themify-icons.css?nocache=123">
<!--<link rel="stylesheet" href="../style.css?nocache=123">-->

<!-- bootstrat v4.1.1, required CSS from more recent version -->
<link rel="stylesheet" href="../bootstrap.more.css?nocache=123">

<link href="../style.css?nocache=123" rel="stylesheet">
<!-- end of addition for svPkgdown -->


<meta property="og:title" content="Evaluate R code in a server process — evalServer" />
<meta property="og:description" content="This function is designed to connect two R processes together using the
socket server. It allows for piloting the server R process from a client R
process, to evaluate R code in the server and return its results to the
client." />
<meta name="twitter:card" content="summary" />






<!-- Mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <!-- preloader start -->
<div class="preloader">
  <img src="../preloader.gif" alt="loading...">
</div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews">
         </a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q"
            placeholder="Search..." required>
          <input type="hidden" name="sitesearch" value="https://www.sciviews.org" />
        </div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svSocket.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/svSocket/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class = "h2">svSocket <small>v1.0.0</small></p></a>
      </div>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Evaluate R code in a server process</h1>
    <small class="dont-index">Source: <a href='https://github.com/SciViews/svSocket/blob/master/R/evalServer.R'><code>R/evalServer.R</code></a></small>
    <div class="hidden name"><code>evalServer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function is designed to connect two R processes together using the
socket server. It allows for piloting the server R process from a client R
process, to evaluate R code in the server and return its results to the
client.</p>
    </div>

    <pre class="usage"><span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>expr</span>, <span class='kw'>send</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>con</th>
      <td><p>a socket connection with the server (see examples).</p></td>
    </tr>
    <tr>
      <th>expr</th>
      <td><p>an R expression to evaluate in the server.</p></td>
    </tr>
    <tr>
      <th>send</th>
      <td><p>optional data to send to the server.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The object returned by the last evaluation in the server.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function serializes R objects using <code><a href='https://rdrr.io/r/base/dump.html'>dump()</a></code> on the server, and it
<code><a href='https://rdrr.io/r/base/source.html'>source()</a></code>s the data on the client side. It has, thus, the same limitations
as <code><a href='https://rdrr.io/r/base/dump.html'>dump()</a></code>, (see <code><a href='https://rdrr.io/r/base/dump.html'>?dump</a></code>), and in particular, environments, external
pointers, weak references and objects of type <code>S4</code> are not serializable with
<code><a href='https://rdrr.io/r/base/dump.html'>dump()</a></code> and will raise an error, or will produce unusable objects on the
client side. Note also that lists or attributes of accepted objects may
contain external pointers or environments, and thus, the whole object becomes
unserializable. In that case, try to coerce your object, or extract a part of
it on the server side to make sure you send just the part that is
transferable between the two R processes.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='sendSocketClients.html'>sendSocketClients()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Start an R process and make it a server</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>svSocket</span>)
<span class='fu'><a href='startSocketServer.html'>startSocketServer</a></span>()

<span class='co'># Start a second R process and run this code in it (the R client):</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>svSocket</span>)

<span class='co'># Connect with the R socket server</span>
<span class='no'>con</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/connections.html'>socketConnection</a></span>(<span class='kw'>host</span> <span class='kw'>=</span> <span class='st'>"localhost"</span>, <span class='kw'>port</span> <span class='kw'>=</span> <span class='fl'>8888</span>, <span class='kw'>blocking</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='no'>L</span> <span class='kw'>&lt;-</span> <span class='fl'>10</span>:<span class='fl'>20</span>
<span class='no'>L</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>L</span>)             <span class='co'># L is not an the server, hence the error</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>L</span>, <span class='no'>L</span>)          <span class='co'># Send it to the server</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>L</span>)             <span class='co'># Now it is there</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>L</span>, <span class='no'>L</span> + <span class='fl'>2</span>)
<span class='no'>L</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>L</span>)

<span class='co'># More examples</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"x &lt;- 42"</span>)     <span class='co'># Set x</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"y &lt;- 10"</span>)     <span class='co'># Set y</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>x</span> + <span class='no'>y</span>)         <span class='co'># Quotes not needed</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"x + y"</span>)       <span class='co'># but you can put quotes if you like</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>x</span>)             <span class='co'># Same as get x</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"x + Y"</span>)       <span class='co'># Return server side-error to the client</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>x</span>)             <span class='co'># Keep working after an error</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"x &lt;- 'a'"</span>)    <span class='co'># Embedded quotes are OK</span>

<span class='co'># Examples of sending data</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>X</span>, -<span class='fl'>42</span>)        <span class='co'># Alternative way to assign to X</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>Y</span>, <span class='fl'>1</span>:<span class='fl'>10</span>)
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>X</span> + <span class='no'>Y</span>)
<span class='no'>X</span>  <span class='co'># Generates an error, X is not here in the client, only on the server</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>X</span>)
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"Z &lt;- X + 3"</span>)  <span class='co'># Send an assignment to execute remotely</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>X</span> + <span class='no'>Z</span>)
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='st'>"Z &lt;- X + 1:1000; NULL"</span>)   <span class='co'># Same but do not return Z</span>
<span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>Z</span>))
<span class='no'>Z</span> <span class='kw'>&lt;-</span> <span class='fu'>evalServer</span>(<span class='no'>con</span>, <span class='no'>Z</span>)        <span class='co'># Bring it back to client</span>
<span class='no'>Z</span>

<span class='co'># Close connection with the R socket server</span>
<span class='fu'><a href='https://rdrr.io/r/base/connections.html'>close</a></span>(<span class='no'>con</span>)

<span class='co'># Now, switch back to the R server process and check</span>
<span class='co'># that the created variables are there</span>
<span class='no'>L</span>
<span class='no'>x</span>
<span class='no'>y</span>
<span class='no'>X</span>
<span class='no'>Y</span>
<span class='no'>Z</span>

<span class='co'># Stop the socket server</span>
<span class='fu'><a href='startSocketServer.html'>stopSocketServer</a></span>()
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- footer -->
<!--<footer class="bg-secondary">-->
<div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo">
                        <p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline">

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links">

                        <li>
                            <a href="http://econum.umons.ac.be">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/">UMONS</a>
                        </li>

                    </ul>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links">

                        <li>
                            <a href="https://www.sciviews.org/software/svbox">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about">About</a>
                        </li>

                    </ul>
                </div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br/><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> &copy; All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right">

                        <li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer>
   </div>

  


  </body>
</html>


