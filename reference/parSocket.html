<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get or set parameters specific to Sciviews socket clients — parSocket • svSocket</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>



<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- svPkgdown -->
<script src="../script.js"></script>

<!-- themify icon -->
<link rel="stylesheet" href="../themify-icons.css?nocache=123">
<!--<link rel="stylesheet" href="../style.css?nocache=123">-->

<!-- bootstrat v4.1.1, required CSS from more recent version -->
<link rel="stylesheet" href="../bootstrap.more.css?nocache=123">

<link href="../style.css?nocache=123" rel="stylesheet">
<!-- end of addition for svPkgdown -->


<meta property="og:title" content="Get or set parameters specific to Sciviews socket clients — parSocket" />
<meta property="og:description" content="This function manage to persistently store sensible parameters for
configuring communication between the server and the client, as well as, any
other persistent data you may need. Parameters remain set even if the client
disconnects and then reconnects to R, as long R was not restarted." />
<meta name="twitter:card" content="summary" />






<!-- Mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js" async integrity="sha256-nlrDrBTHxJJlDDX22AS33xYI1OJHnGMDhiYMSe2U0e0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/config/TeX-AMS-MML_HTMLorMML.js" async integrity="sha256-4zys9A4hMQmtq2EUL+JRoXc0NZi8jVJMzb8onewOaSQ=" crossorigin="anonymous"></script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-462421-8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-462421-8');
</script>-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <!-- preloader start -->
<div class="preloader">
  <img src="../preloader.gif" alt="loading...">
</div>
<!-- preloader end -->

<div class="navbar navbar-default navbar-fixed-top bg-secondary" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="navbar-brand-container">
       <div class="navbar-brand-logo">
         <a class="navbar-brand" href="https://www.sciviews.org">
          <img src="../logo_full.png" alt="SciViews">
         </a>
       </div>
       <div class="navbar-brand-package">
      </div>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <!-- start svPkgdown global site search with Google -->
      <form action="https://www.google.com/search" class="navbar-form navbar-right search-form-global">
        <div class="form-group has-search">
          <span class="fa fa-search form-control-feedback-global"></span>
          <input type="text" class="form-control-global search-form-input" name="q" id="q"
            placeholder="Search..." required>
          <input type="hidden" name="sitesearch" value="https://www.sciviews.org" />
        </div>
      </form>
      <!-- end svPkgdown global site search with Google -->
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/svSocket.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/SciViews/svSocket/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <div class="navbar-title">
        <a class="navbar-brand" href="../index.html"><p class = "h2">svSocket <small>v1.0.0</small></p></a>
      </div>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
  <div class="navbar-spacer bg-light">
  </div>
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get or set parameters specific to Sciviews socket clients</h1>
    <small class="dont-index">Source: <a href='https://github.com/SciViews/svSocket/blob/master/R/parSocket.R'><code>R/parSocket.R</code></a></small>
    <div class="hidden name"><code>parSocket.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function manage to persistently store sensible parameters for
configuring communication between the server and the client, as well as, any
other persistent data you may need. Parameters remain set even if the client
disconnects and then reconnects to R, as long R was not restarted.</p>
    </div>

    <pre class="usage"><span class='fu'>parSocket</span>(<span class='no'>client</span>, <span class='kw'>serverport</span> <span class='kw'>=</span> <span class='fl'>8888</span>, <span class='kw'>clientsocket</span> <span class='kw'>=</span> <span class='no'>client</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>client</th>
      <td><p>the client identification. By default, it is the socket
identifier as it appears in [<code><a href='getSocketClients.html'>getSocketClients()</a></code>. Since no attempt is made
to check if the client really exists and is connected, you can create fake
ones, outside of the socket server, to test your code for instance.</p></td>
    </tr>
    <tr>
      <th>serverport</th>
      <td><p>the port on which the server is running, 8888 by default.
Not important for fake socket client configurations.</p></td>
    </tr>
    <tr>
      <th>clientsocket</th>
      <td><p>the Tcl name of the socket where the client is connected.
By default, it is the same as <code>client</code> name, but in case it was modified, do
provide a correct <code>clientsocket</code> string if you want to be able to activate a
redirection to it (see <code><a href='socketClientConnection.html'>socketClientConnection()</a></code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>the parameters you want to change as named arguments. Non named
arguments are ignored with a warning. If you specify <code>arg = NULL</code>, the
corresponding variable is deleted from the environment.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns the environment where parameters and data for the client are stored.
To access those data, see examples below.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>You can assign the environment to a variable, and then, access its content
like if it was a list (<code>e$var</code> or <code>e$var &lt;- "new value"</code>). To get a list of
the content, use <code><a href='https://rdrr.io/r/base/ls.html'>ls(parSocket(client, port))</a></code>, or
<code><a href='https://rdrr.io/r/base/ls.html'>ls(parSocket(client, port), all.names = TRUE)</a></code>, but not
<code><a href='https://rdrr.io/r/base/names.html'>names(parSocket(client, port))</a></code>. As long as you keep a variable pointing on
that environment alive, you have access to last values (i.e., changes done
elsewhere are taken into account). If you want a frozen snapshot of the
parameters, you should use <code>myvar &lt;- as.list(parSocket(client, port)</code>.</p>
<p>There is a convenient placeholder for code send by the client to insert
automatically the right socket and serverport in <code>parSocket()</code>: <code>&lt;&lt;&lt;s&gt;&gt;&gt;</code>.
Hence, code that the client send to access or change its environment is just
<code>parSocket(&lt;&lt;&lt;s&gt;&gt;&gt;, bare = FALSE)</code> or <code>parSocket(&lt;&lt;&lt;s&gt;&gt;&gt;)$bare</code> to set or get
one parameter. Note that you can set or change many parameters at once.</p>
<p>Currently, parameters are:</p><ul>
<li><p><code>bare = TRUE|FALSE</code> for "bare" mode (no prompt, no echo, no multiline; by default, <code>bare = TRUE</code>),</p></li>
<li><p><code>multiline = TRUE|FALSE</code>: does the server accept code spread on multiple
lines and send in several steps (by default, yes, but works only if
<code>bare = FALSE</code>.</p></li>
<li><p><code>echo = TRUE|FALSE</code> is the command echoed to the regular R console (by
default <code>echo = FALSE</code>).</p></li>
<li><p><code>last = ""</code> string to append to each output (for instance to indicate that processing is done),</p></li>
<li><p><code>prompt = "&gt; "</code>, the prompt to use (if not in bare mode) and</p></li>
<li><p><code>continue = "+ "</code> the continuation prompt to use, when multiline mode is
active. You can only cancel a multiline mode by completing the R code you are
sending to the server, but you can break it too by sending <code>&lt;&lt;&lt;esc&gt;&gt;&gt;</code> before
the next instruction. You can indicate <code>&lt;&lt;&lt;q&gt;&gt;&gt;</code> or <code>&lt;&lt;&lt;Q&gt;&gt;&gt;</code> at the very
beginning of an instruction to tell R to disconnect the connection after the
command is processed and result is returned (with <code>&lt;&lt;&lt;q&gt;&gt;&gt;</code>), or when the
instructions are received but before they are processed (with <code>&lt;&lt;&lt;Q&gt;&gt;&gt;</code>).
This is useful for "one shot" clients (clients that connect, send code and
want to disconnect immediately after that). The code send by the server to
the client to tell him to disconnect gracefully (and do some housekeeping) is
<code>\\f</code> send at the beginning of one line. So, clients should detect this and
perform the necessary actions to gracefully disconnect from the server as
soon as possible, and he cannot send further instructions from this moment
on.</p></li>
</ul>

<p>For clients that repeatedly connect and disconnect, but want persistent data,
the default client identifier (the socket name) cannot be used, because that
socket name would change from connection to connection. The client must then
provide its own identifier. This is done by sending <code>&lt;&lt;&lt;id=myID&gt;&gt;&gt;</code> at the
very beginning of a command. This must be done for all commands! <code>myID</code> must
use only characters or digits. This code could be followed by <code>&lt;&lt;&lt;e&gt;&gt;&gt;</code>,
<code>&lt;&lt;&lt;h&gt;&gt;&gt;</code> or <code>&lt;&lt;&lt;H&gt;&gt;&gt;</code>. These commands are intended for R editors/IDE. The
first code <code>&lt;&lt;&lt;e&gt;&gt;&gt;</code> sets the server into a mode that is suitable to
evaluate R code (including in a multi-line way). The other code temporarily
configure the server to run the command (in single line mode only) in a
hidden way. They can be used to execute R code without displaying it in the
console (for instance, to start context help, to get a calltip, or a
completion list, etc.). The differences between <code>&lt;&lt;&lt;h&gt;&gt;&gt;</code> and <code>&lt;&lt;&lt;H&gt;&gt;&gt;</code> is
that the former waits for command completion and returns results of the
command to the client before disconnecting, while the latter disconnects from
the client before executing the command.</p>
<p>There is a simple client (written in Tcl) available in the /etc subdirectory
of this package installation. Please, read the 'ReadMe.txt' file in the same
directory to learn how to use it. You can use this simple client to
experiment with the communication using these sockets, but it does not
provide advanced command line edition, no command history, and avoid pasting
more than one line of code into it.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='startSocketServer.html'>startSocketServer()</a></code>, <code><a href='sendSocketClients.html'>sendSocketClients()</a></code>, <code><a href='getSocketClients.html'>getSocketClients()</a></code>,
<code><a href='socketClientConnection.html'>socketClientConnection()</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># We use a fake socket client configuration environment</span>
<span class='no'>e</span> <span class='kw'>&lt;-</span> <span class='fu'>parSocket</span>(<span class='st'>"fake"</span>)
<span class='co'># Look at what it contains</span>
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span>(<span class='no'>e</span>)</div><div class='output co'>#&gt;  [1] "bare"         "client"       "clientsocket" "code"         "continue"    
#&gt;  [6] "echo"         "flag"         "last"         "multiline"    "prompt"      
#&gt; [11] "serverport"  </div><div class='input'><span class='co'># Get one data</span>
<span class='no'>e</span>$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'># ... or</span>
<span class='fu'>parSocket</span>(<span class='st'>"fake"</span>)$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Change it</span>
<span class='fu'>parSocket</span>(<span class='st'>"fake"</span>, <span class='kw'>bare</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='co'># Note it is changed too for e</span>
<span class='no'>e</span>$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] FALSE</div><div class='input'>
<span class='co'># You can change it too with</span>
<span class='no'>e</span>$<span class='no'>bare</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='no'>e</span>$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='fu'>parSocket</span>(<span class='st'>"fake"</span>)$<span class='no'>bare</span></div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Create a new entry</span>
<span class='no'>e</span>$<span class='no'>foo</span> <span class='kw'>&lt;-</span> <span class='st'>"test"</span>
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span>(<span class='no'>e</span>)</div><div class='output co'>#&gt;  [1] "bare"         "client"       "clientsocket" "code"         "continue"    
#&gt;  [6] "echo"         "flag"         "foo"          "last"         "multiline"   
#&gt; [11] "prompt"       "serverport"  </div><div class='input'><span class='fu'>parSocket</span>(<span class='st'>"fake"</span>)$<span class='no'>foo</span></div><div class='output co'>#&gt; [1] "test"</div><div class='input'><span class='co'># Now delete it</span>
<span class='fu'>parSocket</span>(<span class='st'>"fake"</span>, <span class='kw'>foo</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span>(<span class='no'>e</span>)</div><div class='output co'>#&gt;  [1] "bare"         "client"       "clientsocket" "code"         "continue"    
#&gt;  [6] "echo"         "flag"         "last"         "multiline"    "prompt"      
#&gt; [11] "serverport"  </div><div class='input'>
<span class='co'># Our fake socket config is in SciViews:TempEnv environment</span>
<span class='no'>s</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/search.html'>search</a></span>()
<span class='no'>l</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/length.html'>length</a></span>(<span class='no'>s</span>)
<span class='no'>pos</span> <span class='kw'>&lt;-</span> (<span class='fl'>1</span>:<span class='no'>l</span>)[<span class='no'>s</span> <span class='kw'>==</span> <span class='st'>"SciViews:TempEnv"</span>]
<span class='fu'><a href='https://rdrr.io/r/base/ls.html'>ls</a></span>(<span class='kw'>pos</span> <span class='kw'>=</span> <span class='no'>pos</span>)  <span class='co'># It is named 'SocketClient_fake'</span></div><div class='output co'>#&gt; [1] "SocketClient_fake"</div><div class='input'><span class='co'># Delete it</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='no'>SocketClient_fake</span>, <span class='kw'>pos</span> <span class='kw'>=</span> <span class='no'>pos</span>)
<span class='co'># Do some house keeping</span>
<span class='fu'><a href='https://rdrr.io/r/base/rm.html'>rm</a></span>(<span class='kw'>list</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"s"</span>, <span class='st'>"l"</span>, <span class='st'>"pos"</span>))</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- footer -->
<!--<footer class="bg-secondary">-->
<div class="bg-secondary full-width">
    <div class="py-100 border-bottom" style="border-color: #454547 !important">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <div class="mb-5 mb-md-0 text-center text-md-left">
                        <!-- logo -->
                        <img class="mb-30" src="https://www.sciviews.org/images/logo-footer.png" alt="logo">
                        <p class="text-white mb-30"> We build software for reproducible research with R</p>
                        <!-- social icon -->
                        <ul class="list-inline">

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://github.com/SciViews">
                                    <i class="ti-github"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://twitter.com/PhilGrosjean">
                                    <i class="ti-twitter-alt"></i>
                                </a>
                            </li>

                            <li class="list-inline-item">
                                <a class="social-icon-outline" href="https://www.linkedin.com/in/philippe-grosjean-5b6b29a2/">
                                    <i class="ti-linkedin"></i>
                                </a>
                            </li>

                        </ul>
                    </div>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Related</p>
                    <ul class="footer-links">

                        <li>
                            <a href="http://econum.umons.ac.be">Our Lab</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/fs/en/">Our Faculty</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/complexys/en/">Complexys</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/infortech/en/">InforTech</a>
                        </li>

                        <li>
                            <a href="https://web.umons.ac.be/en/">UMONS</a>
                        </li>

                    </ul>
                </div>
                <!-- footer links -->
                <div class="col-lg-2 col-md-4 col-6">
                    <p class="h4 text-white mb-4">Quick Link</p>
                    <ul class="footer-links">

                        <li>
                            <a href="https://www.sciviews.org/software/svbox">SciViews Box</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/sciviews-r">SciViews::R</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/software/zooimage">Zoo/PhytoImage</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/blog">Blog</a>
                        </li>

                        <li>
                            <a href="https://www.sciviews.org/about">About</a>
                        </li>

                    </ul>
                </div>
                <!-- subscribe form -->
                <div class="col-lg-3 col-md-12 offset-lg-1">
                    <div class="mt-5 mt-lg-0 text-center text-md-left">
                             <p class="h4 mb-4 text-white">Contact Us</p>
                             <p class="text-white mb-4">Need more info?<br/><a href="mailto:info@sciviews.org"><span class="text-primary">Leave us a mail...</span></a></p>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- copyright -->
    <div class="pt-4 pb-3 position-relative">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 col-md-5">
                    <p class="text-white text-center text-md-left">
                        <span class="text-primary">SciViews</span> &copy; All Right Reserved</p>
                </div>
                <div class="col-lg-6 col-md-7">
                    <ul class="list-inline text-center text-md-right">

                        <li class="list-inline-item mx-lg-3 my-lg-0 mx-2 my-2">
                            <a class="font-secondary text-white" href="https://creativecommons.org/licenses/by/4.0/">Site content under CC-BY 4.0 license</a>
                        </li>

                    </ul>
                </div>
            </div>
        </div>
        <!-- back to top -->
        <!--<button class="back-to-top">
            <i class="ti-angle-up"></i>
        </button>-->
    </div>
</div>
<!--</footer>-->
<!-- /footer -->

      </footer>
   </div>

  


  </body>
</html>


